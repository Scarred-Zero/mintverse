{% extends "main/partials/base_2.html" %} {% block title %} {{ title }} {%
endblock %} {% block content %}

<section class="buy__wrapper" id="finalising-purchase-wrapper">
  <div class="paddings innerWidth buy__container">
    <div class="buy__left">
      <div class="buy__img-container">
        <img src="{{nft.nft_image}}" alt="{{nft.nft_name}}" />
      </div>
      <div class="flexColCenter buy__des">
        <div class="accordion">
          <!-- Accordion Item -->
          <div class="accordion__item expanded">
            <!-- Initially expanded by default -->
            <button
              class="accordion__btn flexCenter"
              onclick="toggleAccordion(this)"
            >
              <div class="flexCenter icon">
                <svg
                  width="30"
                  height="30"
                  viewBox="0 0 18 18"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M2.875 14.625V14.9993C2.79666 14.8949 2.75019 14.7652 2.75 14.6247V3.37529C2.75019 3.23476 2.79666 3.10509 2.875 3.00069V3.375V14.625ZM3.3755 15.25C3.23489 15.2499 3.10514 15.2034 3.00069 15.125H3.375H14.6256H14.9993C14.8949 15.2034 14.7651 15.2499 14.6245 15.25H3.3755ZM15.25 14.6245C15.2499 14.7648 15.2036 14.8942 15.1256 14.9985L15.1256 14.625L15.125 3.37497L15.125 3.00067C15.2034 3.10512 15.2499 3.23488 15.25 3.3755V14.6245ZM14.6247 2.75C14.7652 2.75019 14.8949 2.79666 14.9993 2.875H14.625H3.375H3.00069C3.10509 2.79666 3.23476 2.75019 3.37529 2.75H14.6247ZM9.0625 12.375V12.875H9.5625H10.75V13H7.25V12.875H8.4375H8.9375V12.375V8.4375V7.9375H8.4375H7.8125V7.8125H9.0625V12.375ZM8.65625 5.53125C8.65625 5.34141 8.81016 5.1875 9 5.1875C9.18984 5.1875 9.34375 5.34141 9.34375 5.53125C9.34375 5.72109 9.18986 5.87498 9 5.87498C8.81014 5.87498 8.65625 5.72109 8.65625 5.53125Z"
                    fill="#3C4A71"
                    stroke="#2691cf"
                  ></path>
                </svg>
              </div>
              <span class="accordion__title">Token Details</span>
              <div class="flexCenter icon">
                <i class="fa fa-angle-down"></i>
              </div>
            </button>
            <div class="accordion__panel">
              <h4 class="accordion__des-title">Description</h4>
              <p class="secondaryText">{{nft.description}}</p>
              <hr />
              <h4 class="accordion__des-title royalties">
                Royalties <span>{{nft.royalties}}%</span>
              </h4>
              <hr />
              <span class="accordion__title">Details</span>
              <div class="artist__detail">
                <svg width="14" height="16" viewBox="0 0 14 16">
                  <path
                    d="M5.71393 1.83854L6.13102 2.11429L5.71393 1.83855L1.93612 7.55288L1.60592 8.05234L2.15626 8.2882L6.39258 10.1037C6.78037 10.27 7.21943 10.27 7.60723 10.1038C7.60725 10.1038 7.60728 10.1038 7.6073 10.1037L11.8436 8.2882L12.394 8.05234L12.0638 7.55288L8.28597 1.83859C8.28596 1.83858 8.28596 1.83857 8.28595 1.83855C7.67649 0.916563 6.32342 0.916648 5.71393 1.83854ZM2.71422 8.7993L1.42014 8.2447C1.44974 7.96525 1.54522 7.69087 1.70725 7.44578L5.50537 1.70067L5.50538 1.70067C6.21369 0.629238 7.78619 0.629234 8.49451 1.70067L8.49452 1.70068L12.2927 7.44577C12.2927 7.44578 12.2927 7.44578 12.2927 7.44578C12.4547 7.69088 12.5502 7.96527 12.5798 8.24472L11.2857 8.7993L7.70573 10.3335L7.70572 10.3336C7.255 10.5267 6.74488 10.5267 6.29416 10.3336L6.29415 10.3336L2.71422 8.7993ZM1.76419 9.50307C1.56787 9.23911 1.45282 8.93387 1.41999 8.62136L2.11606 9.55727L5.76291 14.4606C6.37933 15.2894 7.62055 15.2894 8.23697 14.4606L11.8839 9.55727L12.5799 8.62143C12.5471 8.93392 12.432 9.23913 12.2357 9.50306L8.43758 14.6098C8.43758 14.6098 8.43758 14.6098 8.43757 14.6098C7.72117 15.573 6.27871 15.573 5.56231 14.6098L1.76419 9.50307L1.36627 9.79902L1.76419 9.50307Z"
                    fill="white"
                    stroke="white"
                  ></path>
                </svg>
                <h1 class="artist__name">{{nft.creator}}</h1>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="artist__section">
        <h1>Artist</h1>
        <div class="artist__profile">
          <img src="/static/assets/images/profile_profile_img.jpg" alt="" />
        </div>
        <h1 class="artist__name">{{nft.creator}}</h1>
      </div>
    </div>

    <div class="buy__right">
      <div class="buy__right-con">
        <h1 class="buy__nft-name burntOrangeText">{{nft.nft_name}}</h1>

        <div class="buy__creator-and-owner-con">
          <span class="owner">
            <p class="buy__owner-label">Owner:</p>
            <p class="owner__name">{{nft.creator}}</p>
            <div class="buy__owner-profile">
              <img src="/static/assets/images/profile_profile_img.jpg" alt="" />
            </div>
          </span>
          <span class="owner">
            <p class="buy__owner-label">Creator:</p>
            <p class="owner__name">{{nft.creator}}</p>
            <div class="buy__owner-profile">
              <img src="/static/assets/images/profile_profile_img.jpg" alt="" />
            </div>
          </span>
        </div>

        <div class="buy__royalties-con">
          <span class="buy__royalties-con-item">
            <svg
              width="18"
              height="18"
              viewBox="0 0 18 18"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <g clip-path="url(#clip0_10839_170044)">
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M10.286 1.30191C10.0409 -0.147024 7.95912 -0.147024 7.71402 1.30191C7.5384 2.3403 6.26802 2.75306 5.51555 2.01624C4.46559 0.988099 2.78143 2.21171 3.4348 3.528C3.90304 4.47132 3.11791 5.55196 2.07607 5.39813C0.622301 5.1835 -0.0209916 7.16335 1.28129 7.84423C2.21457 8.33215 2.21457 9.66787 1.28129 10.1558C-0.0209922 10.8367 0.622301 12.8165 2.07606 12.6019C3.11791 12.4481 3.90304 13.5287 3.4348 14.472C2.78143 15.7883 4.46559 17.0119 5.51555 15.9838C6.26802 15.247 7.5384 15.6597 7.71402 16.6981C7.95912 18.1471 10.0409 18.1471 10.286 16.6981C10.4617 15.6597 11.732 15.247 12.4844 15.9838C13.5344 17.0119 15.2186 15.7883 14.5652 14.472C14.097 13.5287 14.8821 12.4481 15.9239 12.6019C17.3777 12.8165 18.021 10.8367 16.7187 10.1558C15.7855 9.66787 15.7855 8.33215 16.7187 7.84423C18.021 7.16335 17.3777 5.1835 15.9239 5.39813C14.8821 5.55196 14.097 4.47132 14.5652 3.528C15.2186 2.21171 13.5344 0.988099 12.4844 2.01624C11.732 2.75306 10.4617 2.3403 10.286 1.30191ZM4.92495 8.04991C4.9448 8.04991 4.96444 8.04901 4.98383 8.04727C4.9736 8.16517 5.03307 8.36623 5.12473 8.67613L5.77531 10.876C5.81204 11.0002 5.83041 11.0623 5.87832 11.098C5.92624 11.1338 5.991 11.1338 6.12054 11.1338H8.68008H9.35274H11.9123C12.0418 11.1338 12.1066 11.1338 12.1545 11.098C12.2024 11.0623 12.2208 11.0002 12.2575 10.876L12.9081 8.67613C12.9992 8.36809 13.0585 8.16757 13.0492 8.04943C13.0579 8.04973 13.0666 8.04991 13.0753 8.04991C13.4343 8.04991 13.7253 7.75891 13.7253 7.39999C13.7253 7.04101 13.4343 6.75001 13.0753 6.75001C12.7164 6.75001 12.4254 7.04101 12.4254 7.39999C12.4254 7.65013 12.5668 7.86727 12.7739 7.97593C12.6683 8.03635 12.5293 8.14429 12.3421 8.28973L11.0016 9.33079C10.8376 9.45823 10.7555 9.52195 10.6714 9.50173C10.5872 9.48151 10.5431 9.38749 10.4549 9.19945L9.34638 6.83749C9.33264 6.80809 9.31956 6.78019 9.30702 6.75373C9.52236 6.64789 9.67062 6.42631 9.67062 6.17011C9.67062 5.81113 9.37962 5.52013 9.02064 5.52013C8.66172 5.52013 8.37072 5.81113 8.37072 6.17011C8.37072 6.42619 8.5188 6.64771 8.73408 6.75361C8.72154 6.78013 8.7084 6.80809 8.6946 6.83749L7.58394 9.20413C7.49568 9.39217 7.45158 9.48619 7.36746 9.50641C7.28334 9.52663 7.20126 9.46291 7.03722 9.33547L5.69076 8.28973C5.49387 8.13679 5.35031 8.02531 5.24286 7.96699C5.44103 7.85569 5.57491 7.64347 5.57491 7.39999C5.57491 7.04101 5.28392 6.75001 4.92495 6.75001C4.566 6.75001 4.27501 7.04101 4.27501 7.39999C4.27501 7.75891 4.566 8.04991 4.92495 8.04991ZM6.03 11.7258C5.93059 11.7258 5.85 11.8064 5.85 11.9058V12.5507C5.85 12.6501 5.93059 12.7307 6.03 12.7307H12.003C12.1024 12.7307 12.183 12.6501 12.183 12.5507V11.9058C12.183 11.8064 12.1024 11.7258 12.003 11.7258H6.03Z"
                  fill="#FFC21C"
                ></path>
              </g>
              <defs>
                <clipPath id="clip0_10839_170044">
                  <rect width="18" height="18" fill="white"></rect>
                </clipPath>
              </defs>
            </svg>
            {{nft.royalties}}% Royalties
          </span>
          <span class="buy__royalties-con-item">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="22"
              height="22"
              viewBox="0 0 24 24"
              fill="none"
              stroke="cyan"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
              <circle cx="12" cy="12" r="3"></circle>
            </svg>
            {{nft.views}}
          </span>
        </div>

        <div class="buy__right-con-item">
          <h3>List Price</h3>
          <h2>{{nft.price}} ETH</h2>
          <small
            >*This is the listed price for the NFT, but it doesn’t guarantee the
            seller will accept the default price purchase offer.</small
          >
        </div>

        <div class="buy__right-con-item">
          <form
            action="{{ url_for('user.finalising_purchase', ref_number=ref_number) }}"
            method="post"
            enctype="multipart/form-data"
            class="flexColCenter walletDeposit__form"
          >
            {{ form.csrf_token }}
            <div class="walletDeposit__input-container grid">
              <div class="walletDeposit__form-div">
                {{ form.eth_address.label(class="walletDeposit__form-tag") }}
                <span class="walletDeposit__ethAddress-container">
                  {{ form.eth_address(id="eth-address",
                  class="walletDeposit__form-input") }}
                  <span id="copy-btn" onclick="copyToClipboard('eth-address')">
                    <i class="fa fa-copy"></i>
                  </span>
                </span>
              </div>

              <div class="walletDeposit__form-div">
                {{ form.listed_price.label(class="walletDeposit__form-tag") }}
                {{ form.listed_price() }}
                <small
                  >*Your purchase will be subject to seller approval. <br> If you have made an offer and it has been approved. Send the approved offer price and upload receipt. The seller will confirm claims to an offer. </small
                >
              </div>
            </div>

            <p><strong style="color: cyan">OR</strong></p>
            <hr />

            <!-- ✅ QR Code Section -->
            <div class="walletDeposit__qrcode-con">
              <div class="walletDeposit__qrcode-content">
                <p>Scan QR Code</p>
                <img
                  src="/static/assets/images/wallet_qrcode-img.jpg"
                  alt="QR Code"
                  class="walletDeposit__qrcode-img"
                />
              </div>
              <small
                >Make sure to input the correct NFT price when sending with your
                external wallet, if you scanned the QR code or copied the Eth
                address.</small
              >
            </div>

            <div class="uploadreceipt__content">
              <div>
                <p class="primaryText">Upload Receipt/Screenshot</p>
                <p class="secondaryText" style="margin: 5px 0 15px 0">
                  JPG, PNG, JPEG, WEBP. Max 100 MB.
                </p>
              </div>

              <div class="uploadreceipt___form-img-upload-box">
                <div>
                  <i class="fa fa-cloud-arrow-up"></i>
                  <p>Click the "Choose File" button to upload</p>
                  {{ form.receipt_img.label(class="uploadreceipt__form-tag") }}
                  {{ form.receipt_img(id="receipt_img") }}
                  <p
                    id="file-name"
                    style="margin-top: 10px; font-weight: bold"
                  ></p>
                </div>
              </div>
            </div>
            {{ form.submit() }}
          </form>
        </div>
      </div>
    </div>
  </div>
</section>
<script>
  function showFileName() {
    const input = document.getElementById("receipt_img");
    const fileNameDisplay = document.getElementById("file-name");

    if (input.files.length > 0) {
      fileNameDisplay.textContent = `Selected file: ${input.files[0].name}`;
    } else {
      fileNameDisplay.textContent = ""; // Clear text if no file is selected
    }
  }
</script>
{% endblock %}
